{% extends 'base.html' %}
{% block title %}{{ metric }} {{ screen_name }} Timeline{% endblock %}

{% block js %}
<script src="http://www.google.com/jsapi" type="text/javascript"></script>
<script>
	google.load('visualization', '1', {'packages':['annotatedtimeline']});

	google.setOnLoadCallback(drawChart);

	function drawChart() {
		var chart = new google.visualization.AnnotatedTimeLine(document.getElementById('chart_div'));
		new google.visualization.Query(location.href + '.json').send(function(response) {
			chart.draw(response.getDataTable(), {displayAnnotations: true, thickness: 4});
		});
	}
</script>
{% endblock %}

{% block content %}
<h1 class="metric">@{{ screen_name }} timeline for {{ metric }}</h1>
<div id="chart_div" class="span-18" style="height: 250px"></div>

{% if most_recent %}

	{% if not_much_data %}
		<div class="notice span-5 last">
			<strong style="font-size: larger;">Where's my graph?</strong> Congradulations,
			you've stared graphing with twigra!  Since you <strong>only have a few data
			points</strong>, your graph may look incomplete, but don't worry!  After
		  tweeting a few more days you'll have a graph that would make Tufte green with
			envy.
		</div>
	{% endif %}
	
	<div class="span-19">Last tweet processed: {{ most_recent }}</div>

{% else %}
<div class="notice span-5 last">
	<strong>Where's my graph?</strong> Uh oh, it looks like @twigra hasn't
	processed any direct messages from you with your graph data.  Try reading the
	<a href="/">instructions</a> again or emailing Jim.</div>

{% endif %}

{% endblock %}

